webpackJsonp([2],{"nS+4":function(n,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var e=t("LMZF"),r=t("r8jB"),u=function(){},a=t("tM+F"),i=t("OylW"),o=t("KU+/"),s=t("c0x3"),c=t("HNiT"),d=t("vEzF"),f=t("6yhf"),g=t("+RHT"),p=t("Un6q"),h=t("6Xbx");function _(n){return void 0===n&&(n=null),function(l,t){var e="_"+t;Object.defineProperty(l,t,{configurable:!1,get:function(){if(this[e])return this[e];var l=JSON.parse(localStorage.getItem(t));return l?(this[e]=l,this[e]):n},set:function(n){this[e]=n,localStorage.setItem(t,JSON.stringify(n))}})}}var m=function(){function n(n,l){this.localeService=n,this.gameService=l,this.loadingGame=!1,this.draggedTitleIndex=-1,this.dragOverTitleIndex=-1,this.dragEnterLeaveCounter=0,window.addEventListener("touchmove",function(){})}return n.prototype.newGame=function(){var n=this;this.loadingGame=!0;var l=this.localeService.getCurrentLanguage();this.gameService.newGame(5,l).subscribe(function(l){return n.initGame(l)},function(n){},function(){return n.loadingGame=!1})},n.prototype.initGame=function(n){this.words=n,this.sortedWords=n.slice(0).sort(function(n,l){return n.searchResults-l.searchResults}),this.remainingTitles=n.map(function(n){return n.title}),this.titles=new Array(n.length).fill(null),this.searchResults=this.sortedWords.map(function(n){return n.searchResults}),this.results=[],this.drawNextTitle()},n.prototype.drawNextTitle=function(){this.remainingTitles.length>0?(this.nextTitle=this.remainingTitles.pop(),this.remainingTitles=this.remainingTitles):this.nextTitle=null},n.prototype.updateTitle=function(n,l,t){null!=this.titles[l]?this.moveTitles(n,l,t)||this.moveTitles(n,l,-t):this.titles[l]=n},n.prototype.moveTitles=function(n,l,t){for(var e=l;e>=0&&e<this.titles.length;e+=t)if(null==this.titles[e]){for(var r=e;r!=l;r-=t)this.titles[r]=this.titles[r-t];return this.titles[l]=n,!0}return!1},n.prototype.showResults=function(){var n=this,l=[];this.titles.forEach(function(t,e){l.push(n.sortedWords[e].title==t)}),this.results=l},n.prototype.onNextTitleDragStart=function(n){n.dataTransfer.setData("text/plain",this.nextTitle),n.dataTransfer.effectAllowed="move",this.fixedTitles=this.titles.slice(0),this.draggedTitle=this.nextTitle,this.draggedTitleIndex=-1},n.prototype.onNextTitleDragEnter=function(n){n.preventDefault(),this.dragEnterLeaveCounter++},n.prototype.onNextTitleDragOver=function(n){var l=this;n.preventDefault(),n.dataTransfer.dropEffect="move",this.fixedTitles.forEach(function(n,t){l.titles[t]=n}),this.dragOverTitleIndex=-1},n.prototype.onNextTitleDragLeave=function(){var n=this;this.dragEnterLeaveCounter--,0==this.dragEnterLeaveCounter&&(this.fixedTitles.forEach(function(l,t){n.titles[t]=l}),this.dragOverTitleIndex=-1)},n.prototype.onNextTitleDragEnd=function(){var n=-1!=this.dragOverTitleIndex;this.dragOverTitleIndex=-1,this.dragEnterLeaveCounter=0,this.titles=this.titles,n&&this.drawNextTitle()},n.prototype.onTitleDragStart=function(n,l){n.dataTransfer.setData("text/plain",this.titles[l]),n.dataTransfer.effectAllowed="move",this.fixedTitles=this.titles.slice(0),this.draggedTitle=this.titles[l],this.draggedTitleIndex=l},n.prototype.onTitleDragEnter=function(n){n.preventDefault(),this.dragEnterLeaveCounter++},n.prototype.onTitleDragOver=function(n,l){var t=this;n.preventDefault(),n.dataTransfer.dropEffect="move",this.fixedTitles.forEach(function(n,l){t.titles[l]=t.draggedTitleIndex!=l?n:null}),this.dragOverTitleIndex=l,this.updateTitle(this.draggedTitle,l,-1)},n.prototype.onTitleDragLeave=function(){var n=this;this.dragEnterLeaveCounter--,0==this.dragEnterLeaveCounter&&(this.fixedTitles.forEach(function(l,t){n.titles[t]=l}),this.dragOverTitleIndex=-1)},n.prototype.onTitleDragEnd=function(){this.dragOverTitleIndex=-1,this.dragEnterLeaveCounter=0,this.titles=this.titles},Object(h.c)([_([]),Object(h.f)("design:type",Array)],n.prototype,"words",void 0),Object(h.c)([_(),Object(h.f)("design:type",Array)],n.prototype,"sortedWords",void 0),Object(h.c)([_(),Object(h.f)("design:type",Array)],n.prototype,"remainingTitles",void 0),Object(h.c)([_(),Object(h.f)("design:type",String)],n.prototype,"nextTitle",void 0),Object(h.c)([_(),Object(h.f)("design:type",Array)],n.prototype,"titles",void 0),Object(h.c)([_(),Object(h.f)("design:type",Array)],n.prototype,"searchResults",void 0),Object(h.c)([_([]),Object(h.f)("design:type",Array)],n.prototype,"results",void 0),n}(),v=t("AP4T"),x=t("9iV4"),b=function(){function n(n){this.http=n,this.url="https://allorigins.me/get",this.params=function(n,l){return new x.g({fromObject:{url:"https://www.google.com/search?q="+encodeURIComponent(l)+"&hl="+n+"&lr=lang_"+n}})},this.groupingSeparator=function(n){return 12345..toLocaleString(n).match(/12(.*)345/)[1]},this.localizedNumberPattern=function(n){return new RegExp("\\d{1,3}("+n+"\\d{3})*")}}return n.prototype.getSearchResults=function(n,l){var t=this;return v.a.create(function(e){t.http.get(t.url,{params:t.params(l,n)}).subscribe(function(n){var r=(new DOMParser).parseFromString(n.contents,"text/html").getElementById("resultStats");if(r){var u=t.groupingSeparator(l),a=t.localizedNumberPattern(u).exec(r.innerHTML)[0].replace(new RegExp("\\"+u,"g"),"");e.next(parseInt(a)),e.complete()}else e.error(-1),e.complete()},function(n){n.error instanceof Error?console.error("An error occurred:",n.error.message):console.error("Backend returned code "+n.status+", body was: "+n.error),e.error(n.status),e.complete()})})},n}(),T=function(){function n(n){this.http=n,this.url=function(n){return"https://"+n+".wikipedia.org/w/api.php"},this.params=function(n){return new x.g({fromObject:{action:"query",format:"json",list:"random",rnnamespace:"0",rnlimit:String(Math.min(Math.max(1,n),10)),origin:"*"}})}}return n.prototype.getRandomTitles=function(n,l){var t=this;return v.a.create(function(e){t.http.get(t.url(l),{params:t.params(n)}).subscribe(function(n){var l=[];n.query.random.forEach(function(n){return l.push(n.title)}),e.next(l),e.complete()},function(n){n.error instanceof Error?console.error("An error occurred:",n.error.message):console.error("Backend returned code "+n.status+", body was: "+n.error),e.error(n.status),e.complete()})})},n}(),y=function(n,l){this.title=n,this.searchResults=l},w=function(){function n(n,l){this.googleService=n,this.wikipediaService=l}return n.prototype.newGame=function(n,l){var t=this;return v.a.create(function(e){t.wikipediaService.getRandomTitles(n,l).subscribe(function(r){var u=[];r.forEach(function(r){return t.googleService.getSearchResults(r,l).subscribe(function(l){u.push(new y(r,l)),t.newGameStep(e,u,n)},function(l){console.error("Unable to get number of search results for: "+r),u.push(new y(r,-1)),t.newGameStep(e,u,n)})})},function(n){console.error("Unable to get random titles"),e.error(-1),e.complete()})})},n.prototype.newGameStep=function(n,l,t){l.length==t&&(n.next(l),n.complete())},n}(),O=e._2({encapsulation:0,styles:[[".card-next[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;width:100%}@media (min-width:576px){.card-next[_ngcontent-%COMP%]{width:20%}}.card-active[_ngcontent-%COMP%]{background-color:rgba(0,123,255,.03);color:#fff}@media (max-width:767.98px){.card-footer-searchresults[_ngcontent-%COMP%]{border-left:1px solid rgba(0,0,0,.125);border-top:none;border-top-left-radius:0;border-bottom-left-radius:0}}.card-highlight[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-show-results[_ngcontent-%COMP%]{width:100%}@media (min-width:576px){.btn-show-results[_ngcontent-%COMP%]{width:40%}}.grabbable[_ngcontent-%COMP%]{cursor:move;cursor:grab;cursor:-webkit-grab}.grabbable[_ngcontent-%COMP%]:active{cursor:grabbing;cursor:-webkit-grabbing}"]],data:{}});function I(n){return e._24(0,[(n()(),e._4(0,0,null,null,10,"div",[],null,null,null,null,null)),(n()(),e._23(-1,null,["\n  "])),(n()(),e._4(2,0,null,null,7,"p",[["class","text-center"]],null,null,null,null,null)),(n()(),e._23(-1,null,["\n    "])),(n()(),e._4(4,0,null,null,0,"span",[["class","fas fa-fire text-primary"]],null,null,null,null,null)),(n()(),e._23(-1,null,["\n    "])),(n()(),e._4(6,0,null,null,2,"span",[["l10nTranslate",""]],null,null,null,null,null)),e._3(7,4866048,null,0,r.n,[r.r,e.k,e.C],{l10nTranslate:[0,"l10nTranslate"]},null),(n()(),e._23(-1,null,["Loading Game"])),(n()(),e._23(-1,null,["\n  "])),(n()(),e._23(-1,null,["\n"]))],function(n,l){n(l,7,0,"")},null)}function E(n){return e._24(0,[(n()(),e._4(0,0,null,null,7,"div",[["class","card card-next grabbable"],["draggable","true"]],null,[[null,"dragstart"],[null,"dragenter"],[null,"dragover"],[null,"dragleave"],[null,"dragend"]],function(n,l,t){var e=!0,r=n.component;return"dragstart"===l&&(e=!1!==r.onNextTitleDragStart(t)&&e),"dragenter"===l&&(e=!1!==r.onNextTitleDragEnter(t)&&e),"dragover"===l&&(e=!1!==r.onNextTitleDragOver(t)&&e),"dragleave"===l&&(e=!1!==r.onNextTitleDragLeave()&&e),"dragend"===l&&(e=!1!==r.onNextTitleDragEnd()&&e),e},null,null)),(n()(),e._23(-1,null,["\n        "])),(n()(),e._4(2,0,null,null,4,"div",[["class","card-body"]],null,null,null,null,null)),(n()(),e._23(-1,null,["\n          "])),(n()(),e._4(4,0,null,null,1,"p",[["class","card-text"]],null,null,null,null,null)),(n()(),e._23(5,null,["",""])),(n()(),e._23(-1,null,["\n        "])),(n()(),e._23(-1,null,["\n      "]))],null,function(n,l){n(l,5,0,l.component.nextTitle)})}function N(n){return e._24(0,[(n()(),e._4(0,0,null,null,2,"button",[["class","btn btn-primary btn-lg btn-show-results"],["l10nTranslate",""]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.showResults()&&e),e},null,null)),e._3(1,4866048,null,0,r.n,[r.r,e.k,e.C],{l10nTranslate:[0,"l10nTranslate"]},null),(n()(),e._23(-1,null,["Show Results"]))],function(n,l){n(l,1,0,"")},null)}function D(n){return e._24(0,[(n()(),e._4(0,0,null,null,7,"div",[["class","d-flex justify-content-center mb-4"]],null,null,null,null,null)),(n()(),e._23(-1,null,["\n      "])),(n()(),e.Z(16777216,null,null,1,null,E)),e._3(3,16384,null,0,p.i,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e._23(-1,null,["\n      "])),(n()(),e.Z(16777216,null,null,1,null,N)),e._3(6,16384,null,0,p.i,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e._23(-1,null,["\n    "]))],function(n,l){var t=l.component;n(l,3,0,t.nextTitle),n(l,6,0,!t.nextTitle)},null)}function S(n){return e._24(0,[(n()(),e._4(0,0,null,null,4,"div",[["class","card-body grabbable"],["draggable","true"]],[[2,"card-highlight",null]],[[null,"dragstart"],[null,"dragenter"],[null,"dragover"],[null,"dragleave"],[null,"dragend"]],function(n,l,t){var e=!0,r=n.component;return"dragstart"===l&&(e=!1!==r.onTitleDragStart(t,n.parent.context.index)&&e),"dragenter"===l&&(e=!1!==r.onTitleDragEnter(t)&&e),"dragover"===l&&(e=!1!==r.onTitleDragOver(t,n.parent.context.index)&&e),"dragleave"===l&&(e=!1!==r.onTitleDragLeave()&&e),"dragend"===l&&(e=!1!==r.onTitleDragEnd()&&e),e},null,null)),(n()(),e._23(-1,null,["\n          "])),(n()(),e._4(2,0,null,null,1,"p",[["class","card-text"]],null,null,null,null,null)),(n()(),e._23(3,null,["",""])),(n()(),e._23(-1,null,["\n        "]))],null,function(n,l){var t=l.component;n(l,0,0,t.dragOverTitleIndex==l.parent.context.index),n(l,3,0,t.titles[l.parent.context.index]||"\xa0")})}function j(n){return e._24(0,[(n()(),e._4(0,0,null,null,6,"div",[["class","card-body"]],[[2,"bg-success",null]],null,null,null,null)),(n()(),e._23(-1,null,["\n          "])),(n()(),e._4(2,0,null,null,3,"p",[["class","card-text text-white"]],null,null,null,null,null)),(n()(),e._23(-1,null,["\n            "])),(n()(),e._4(4,0,null,null,0,"span",[["class","fas fa-check fa-fw"]],null,null,null,null,null)),(n()(),e._23(5,null,[" ","\n          "])),(n()(),e._23(-1,null,["\n        "]))],null,function(n,l){var t=l.component;n(l,0,0,t.results[l.parent.context.index]),n(l,5,0,t.titles[l.parent.context.index]||"\xa0")})}function C(n){return e._24(0,[(n()(),e._4(0,0,null,null,11,"div",[["class","card-body"]],[[2,"bg-success",null]],null,null,null,null)),(n()(),e._23(-1,null,["\n          "])),(n()(),e._4(2,0,null,null,3,"p",[["class","card-text"]],null,null,null,null,null)),(n()(),e._23(-1,null,["\n            "])),(n()(),e._4(4,0,null,null,0,"span",[["class","fas fa-times text-danger fa-fw"]],null,null,null,null,null)),(n()(),e._23(5,null,[" ","\n          "])),(n()(),e._23(-1,null,["\n          "])),(n()(),e._4(7,0,null,null,3,"p",[["class","card-text"]],null,null,null,null,null)),(n()(),e._23(-1,null,["\n            "])),(n()(),e._4(9,0,null,null,0,"span",[["class","fas fa-check fa-fw"]],null,null,null,null,null)),(n()(),e._23(10,null,[" ","\n          "])),(n()(),e._23(-1,null,["\n        "]))],null,function(n,l){var t=l.component;n(l,0,0,t.results[l.parent.context.index]),n(l,5,0,t.titles[l.parent.context.index]||"\xa0"),n(l,10,0,t.sortedWords[l.parent.context.index].title)})}function k(n){return e._24(0,[(n()(),e._4(0,0,null,null,17,"div",[["class","card d-flex flex-row flex-sm-column"]],null,null,null,null,null)),(n()(),e._23(-1,null,["\n        "])),(n()(),e.Z(16777216,null,null,1,null,S)),e._3(3,16384,null,0,p.i,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e._23(-1,null,["\n        "])),(n()(),e.Z(16777216,null,null,1,null,j)),e._3(6,16384,null,0,p.i,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e._23(-1,null,["\n        "])),(n()(),e.Z(16777216,null,null,1,null,C)),e._3(9,16384,null,0,p.i,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e._23(-1,null,["\n        "])),(n()(),e._4(11,0,null,null,5,"div",[["class","card-footer card-footer-searchresults d-flex align-items-center"]],null,null,null,null,null)),(n()(),e._23(-1,null,["\n          "])),(n()(),e._4(13,0,null,null,2,"small",[["class","text-muted"],["l10nDecimal",""]],null,null,null,null,null)),e._3(14,4866048,null,0,r.e,[r.h,e.k,e.C],{l10nDecimal:[0,"l10nDecimal"]},null),(n()(),e._23(15,null,["",""])),(n()(),e._23(-1,null,["\n        "])),(n()(),e._23(-1,null,["\n      "]))],function(n,l){var t=l.component;n(l,3,0,0==t.results.length),n(l,6,0,t.results.length>0&&t.results[l.context.index]),n(l,9,0,t.results.length>0&&!t.results[l.context.index]),n(l,14,0,"")},function(n,l){n(l,15,0,l.component.searchResults[l.context.index])})}function L(n){return e._24(0,[(n()(),e._4(0,0,null,null,10,"div",[["class","mb-4"]],null,null,null,null,null)),(n()(),e._23(-1,null,["\n    "])),(n()(),e.Z(16777216,null,null,1,null,D)),e._3(3,16384,null,0,p.i,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e._23(-1,null,["\n\n    "])),(n()(),e._4(5,0,null,null,4,"div",[["class","card-group"]],null,null,null,null,null)),(n()(),e._23(-1,null,["\n      "])),(n()(),e.Z(16777216,null,null,1,null,k)),e._3(8,802816,null,0,p.h,[e.N,e.K,e.q],{ngForOf:[0,"ngForOf"]},null),(n()(),e._23(-1,null,["\n    "])),(n()(),e._23(-1,null,["\n  "]))],function(n,l){var t=l.component;n(l,3,0,0==t.results.length),n(l,8,0,t.titles)},null)}function G(n){return e._24(0,[(n()(),e._4(0,0,null,null,11,"div",[],null,null,null,null,null)),(n()(),e._23(-1,null,["\n  "])),(n()(),e.Z(16777216,null,null,1,null,L)),e._3(3,16384,null,0,p.i,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e._23(-1,null,["\n\n  "])),(n()(),e._4(5,0,null,null,5,"div",[["class","d-flex justify-content-end"]],null,null,null,null,null)),(n()(),e._23(-1,null,["\n    "])),(n()(),e._4(7,0,null,null,2,"button",[["class","btn btn-outline-secondary"],["l10nTranslate",""],["type","button"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.newGame()&&e),e},null,null)),e._3(8,4866048,null,0,r.n,[r.r,e.k,e.C],{l10nTranslate:[0,"l10nTranslate"]},null),(n()(),e._23(-1,null,["New Game"])),(n()(),e._23(-1,null,["\n  "])),(n()(),e._23(-1,null,["\n"]))],function(n,l){n(l,3,0,l.component.words.length>0),n(l,8,0,"")},null)}function M(n){return e._24(0,[(n()(),e.Z(16777216,null,null,1,null,I)),e._3(1,16384,null,0,p.i,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e._23(-1,null,["\n\n"])),(n()(),e.Z(16777216,null,null,1,null,G)),e._3(4,16384,null,0,p.i,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e._23(-1,null,["\n"]))],function(n,l){var t=l.component;n(l,1,0,t.loadingGame),n(l,4,0,!t.loadingGame)},null)}var R=e._0("app-game",m,function(n){return e._24(0,[(n()(),e._4(0,0,null,null,1,"app-game",[],null,null,null,M,O)),e._3(1,49152,null,0,m,[r.h,w],null,null)],null,null)},{},{},[]),P=t("MxGM"),K=t("0nO6"),A=t("dN2u"),Z=t("KRwK"),W=t("T2Au"),F=t("UHIZ"),U=t("Zz+K"),q=t("wnyu"),B=t("tzcA"),z=t("2waW"),H=t("PY9B"),J=t("IBeK"),V=t("g5gQ"),X=t("xBEz"),Q=t("PuIS"),Y=t("U0Tu"),$=t("3rU7"),nn=t("Cb36"),ln=t("5h8W"),tn=t("6ade"),en=t("4HaF"),rn=t("DaIH"),un=t("0WLp"),an=t("0cgG"),on=t("q6yN"),sn=function(){};t.d(l,"GameModuleNgFactory",function(){return cn});var cn=e._1(u,[],function(n){return e._12([e._13(512,e.j,e.X,[[8,[a.a,i.a,o.a,s.a,c.a,d.a,f.a,g.a,R]],[3,e.j],e.v]),e._13(4608,p.k,p.j,[e.s,[2,p.p]]),e._13(4608,r.r,r.r,[r.m,r.h,r.q,r.o]),e._13(4608,r.f,r.f,[r.g,r.m,r.h,r.r]),e._13(4608,P.a,P.a,[r.f]),e._13(4608,K.j,K.j,[]),e._13(4608,A.a,A.a,[e.j,e.p,Z.a]),e._13(4608,b,b,[x.c]),e._13(4608,T,T,[x.c]),e._13(4608,w,w,[b,T]),e._13(512,r.d,r.d,[e.p]),e._13(512,r.p,r.p,[r.d]),e._13(512,r.j,r.j,[r.d]),e._13(512,p.b,p.b,[]),e._13(512,W.a,W.a,[]),e._13(512,F.o,F.o,[[2,F.t],[2,F.k]]),e._13(512,U.a,U.a,[]),e._13(512,q.a,q.a,[]),e._13(512,B.a,B.a,[]),e._13(512,z.a,z.a,[]),e._13(512,H.a,H.a,[]),e._13(512,K.i,K.i,[]),e._13(512,K.a,K.a,[]),e._13(512,J.a,J.a,[]),e._13(512,V.a,V.a,[]),e._13(512,X.a,X.a,[]),e._13(512,Q.a,Q.a,[]),e._13(512,Y.a,Y.a,[]),e._13(512,$.a,$.a,[]),e._13(512,nn.a,nn.a,[]),e._13(512,ln.a,ln.a,[]),e._13(512,tn.a,tn.a,[]),e._13(512,en.a,en.a,[]),e._13(512,rn.a,rn.a,[]),e._13(512,un.a,un.a,[]),e._13(512,an.a,an.a,[]),e._13(512,sn,sn,[]),e._13(512,u,u,[]),e._13(256,r.m,{providers:[{type:1,prefix:"./assets/locale-"},{type:1,prefix:"./assets/locale-game-"}],missingValue:"No key"},[]),e._13(1024,F.i,function(){return[[{path:"",component:on.a,resolve:{l10n:P.a},children:[{path:"",component:m}]}]]},[])])})}});